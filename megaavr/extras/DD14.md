# AVR64DD14/AVR32DD14/AVR16DD14


## Pin Mapping / Pinout
![DD14 Pin Mapping](AVRxxDD14.svg "Arduino Pin Mapping for AVR DD14")

## Features and Peripherals
| Feature                      | AVR16DD14       | AVR32DD14       | AVR64DD14       |
|------------------------------|-----------------|-----------------|-----------------|
| Flash Memory                 | 16384           | 32768           | 65536           |
| SRAM                         | 2048            | 4096            | 8192            |
| EEPROM                       | 256             | 256             | 256             |
| User Row                     | 32              | 32              | 32              |
| Max. Frequency (rated, MHz)  | 24              | 24              | 24              |
| Total pins on package        | 28              | 28              | 28              |
| Packages Available           | SOIC            | SOIC            | SOIC            |
| I/O Pins, not counting Reset | 9 (11)          | 9 (11)          | 9 (11)          |
| Of those, MVIO pins          | 3               | 3               | 3               |
| PWM capable I/O pins         | 7               | 7               | 7               |
| Max simultaneous PWM outputs | 5: 3+0+2        | 5: 3+0+2        | 5: 3+0+2        |
| 16-bit Type A Timer (TCA)    | 1               | 1               | 1               |
| 16-bit Type B Timer (TCB)    | 2 (no PWM)      | 2 (no PWM)      | 2 (no PWM)      |
| 12-bit Type D Timer (TCD)    | 1               | 1               | 1               |
| USART (pin mappings)         | 2 (3, 2)        | 2 (3, 2)        | 2 (3, 2)        |
| SPI (pin mappings)           | 1 (3)           | 1 (3)           | 1 (3)           |
| TWI/I2C                      | 1               | 1               | 1               |
| 12-bit ADC input pins        | 4/7             | 4/7             | 4/7             |
| Of those, neg. diff. inputs  | All             | All             | All             |
| 10-bit DAC                   | 1               | 1               | 1               |
| Analog Comparator (AC)       | 1               | 1               | 1               |
| Zero-Cross Detectors (ZCD)   | 1               | 1               | 1               |
| Opamp                        | NO              | NO              | NO              |
| Custom Logic Blocks (LUTs)   | 4               | 4               | 4               |
| Event System channels        | 6               | 6               | 6               |

## AVR DD14 - DD-tier peripherals in a tinyAVR size package.
The DD-series parts are low-cost, low-pincount AVRs with MVIO and all the headline features of the DB except for the opamps and the sheer number of peripherals. To make the most of the small pincount, these have significantly expanded mapping options for USART0, USART1, SPI0, and TWI0.

### Fully async pins
All pins on the DDs are supposedly fully async, instead of just pins 2 and 6 within each port. Whether this is actually a good thing or not can be debated.

### USART mux options

| USART0: | swap |  TX |  RX | XDIR | XCK |
|---------|------|-----|-----|------|-----|
| DEFAULT | 0    | PA0 | PA1 |   -  |  -  |
| ALT3    | 3    | PD4 | PD5 |  PD6 | PD7 |
| ALT4    | 4    | PC1 | PC2 |  PC3 |  -  |

| USART1  | swap |  TX |  RX | XDIR | XCK |
|---------|------|-----|-----|------|-----|
| DEFAULT | 0    |  -  | PC1 |  PC2 | PC3 |
| ALT2    | 2    | PD6 | PD7 |   -  |  -  |
DEFAULT is not terribly useful here. We don't have a graceful way to propagate the swap level when creating the USART objects though, and arguments against changing PORTMUX options willy-nilly have some weight. Just call swap(2).

### SPI0 mux options
| SPI0    | swap | MOSI | MISO | SCK |  SS |
|---------|------|------|------|-----|-----|
| ALT4    | 4    |  PD4 |  PD5 | PD6 | PD7 |
| ALT5    | 5    |   -  |  PC1 | PC2 | PC3 |
| ALT6    | 6    |  PC1 |  PC2 | PC3 | PF7 |

ALT5 is not the most useful multiplexing option, and should probably not be used - ALT6 however gives you SPI on the right pins of PORTC to be useful for MVIO, while ALT4 (the default) gives you non-MVIO-referenced SPI levels.

### TWI0 mux options
| Mapping | swap | Master or Slave | Dual Mode Slave |
|---------|------|-----------------|-----------------|
| DEFAULT | 0    | Not avail.      | SDA/PC2 SCL/PC3 |
| ALT2    | 2    | SDA/PC2 SCL/PC3 | Not avail.      |
| ALT3    | 3    | SDA/PA0 SCL/PA1 | SDA/PC2 SCL/PC3 |

Note that this means that you want Wire.swap(0, 2, or 3, but not 1). In practice, mode 0 is less than useful - you can do everything you could with mode 0 using mode 2 or mode 3 and then some - and with binary size smaller than or equal.

### PWM Pins
With 20 pins, there still isn't a whole lot of choice...
* TCA0 obviously wants to be on PORTC. On PORTD it would be fully redundant with the TCD, and PA0 and PA1 are the pins used for external clock sources.
* TCD0 only has pins on PORTD, so we set that by default
* The TCBs don't get used for PWM. They support no pins present.

#### TCB mux options
No TCB output pin exists as a physical pin on the DD14s

#### TCD0 mux option
| TCD0    | WOA | WOB | WOC | WOD |
|---------|-----|-----|-----|-----|
| Alt4    |  -  |  -  | PD4 | PD5 |

Default is not a valid option here as it has no pins, core defaults to ALT4, the only one with pins.

#### TCA mux options
| TCA0    | WO0 | WO1 | WO2 | WO3 | WO4 | WO5 |
|---------|-----|-----|-----|-----|-----|-----|
| PORTA   | PA0 | PA1 |  -  |  -  |  -  |  -  |
| PORTC   |  -  | PC1 | PC2 | PC3 |  -  |  -  |
| PORTD   |  -  | -   |  -  |   - | PD4 | PD5 |
Yeah pretty bleak.

Like TCA, 1.5.0 of DxCore, if you set the TCD portmux (PORTMUX.TCD0ROUTEA), digitalWrite and analogWrite() will be aware of it (digitalWriteFast is never aware of PWM, don't use it to shut off PWM, it won't).
