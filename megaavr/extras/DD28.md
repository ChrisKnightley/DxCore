# AVR64DD28/AVR32DD28/AVR16DD28


## Pin Mapping / Pinout
Pin mapping chart not yet available.

## Features and Peripherals
| Feature                      | AVR16DD28       | AVR32DD28       | AVR64DD28       |
|------------------------------|-----------------|-----------------|-----------------|
| Flash Memory                 | 16384           | 32768           | 65536           |
| SRAM                         | 2048            | 4096            | 8192            |
| EEPROM                       | 256             | 256             | 256             |
| User Row                     | 32              | 32              | 32              |
| Max. Frequency (rated, MHz)  | 24              | 24              | 24              |
| Total pins on package        | 28              | 28              | 28              |
| Packages Available           | SOIC, SSOP,     | SOIC, SSOP,     | SOIC, SSOP,     |
| Packages Available           | VQFN28          | VQFN28          | VQFN28          |
| I/O Pins, not counting Reset | 21 (20)         | 21 (20)         | 21 (20)         |
| Of those, MVIO pins          | 4               | 4               | 4               |
| PWM capable I/O pins         | 19              | 19              | 19              |
| Max simultaneous PWM outputs | 9: 6+1+2        | 9: 6+1+2        | 9: 6+1+2        |
| PWM outputs with default map |                 |                 |                 |
| 16-bit Type A Timer (TCA)    | 1               | 1               | 1               |
| 16-bit Type B Timer (TCB)    | 3               | 3               | 3               |
| 12-bit Type D Timer (TCD)    | 1               | 1               | 1               |
| USART (pin mappings)         | 2 (5, 2)        | 2 (5, 2)        | 2 (5, 2)        |
| SPI (pin mappings)           | 1 (5)           | 1 (5)           | 1 (5)           |
| TWI/I2C                      | 1               | 1               | 1               |
| 12-bit ADC input pins        | 15/19           | 15/19           | 15/19           |
| Of those, neg. diff. inputs  | All             | All             | All             |
| 10-bit DAC                   | 1               | 1               | 1               |
| Analog Comparator (AC)       | 1               | 1               | 1               |
| Zero-Cross Detectors (ZCD)   | 1               | 1               | 1               |
| Opamp                        | NO              | NO              | NO              |
| Custom Logic Blocks (LUTs)   | 4               | 4               | 4               |
| Event System channels        | 6               | 6               | 6               |

## AVR DD28 - Povery model DB without the opamps and fewer peripherals, but with a bunch of errata fixes and added port mappings

That basically sums up the DD28 and DD32 parts. They're much cheaper than DB-series, barely above ATtiny parts, but come with most of the full suite of features. Obviously some things were cut versus the DB - they still come in three sizes, but the sizes have half the flash. There is only 1 analog comparator and no USART2, and we're down to just one SPI and I2C peripheral. On the other hand, the pin multipleximg options of USART0 and SPI0 have gotten luxury treatment. Note also that the alternate pin mapping numbers don't start at 1.

The 8 pins that the 28-pin parts pick up versus the 20-pin parts are PC0, PD1-3, PF0-1, and 1 each Vdd and Gnd.

### Fully async pins
All pins on the DDs are supposedly fully async, instead of just pins 2 and 6 within each port. Whether this is actually a good thing or not can be debated.

### USART0 mux options
| USART0  | swap |  TX |  RX | XDIR | XCK |
|---------|------|-----|-----|------|-----|
| DEFAULT | 0    | PA0 | PA1 |  PA2 | PA3 |
| ALT1    | 1    | PA4 | PA5 |  PA6 | PA7 |
| ALT2    | 2    | PA2 | PA3 |   -  |  -  |
| ALT3    | 3    | PD4 | PD5 |  PD6 | PD7 |
| ALT4    | 4    | PC1 | PC2 |  PC3 |  -  |

### USART1 mux options
| USART1  | swap |  TX |  RX | XDIR | XCK |
|---------|------|-----|-----|------|-----|
| DEFAULT | 0    | PC0 | PC1 |  PC2 | PC3 |
| ALT2    | 2    | PD6 | PD7 |   -  |  -  |

The DEFAULT option is finally useful.

### SPI0 mux options
| SPI0    | swap | MOSI | MISO | SCK |  SS |
|---------|------|------|------|-----|-----|
| DEFAULT | 0    |  PA4 |  PA5 | PA6 | PA7 |
| ALT3    | 3    |  PA0 |  PA1 | PC0 | PC1 |
| ALT4    | 4    |  PD4 |  PD5 | PD6 | PD7 |
| ALT5    | 5    |  PC0 |  PC1 | PC2 | PC3 |
| ALT6    | 6    |  PC1 |  PC2 | PC3 | PF7 |

Suddenly we have 5 usable mux options!

### TWI0 mux options
| Mapping | swap | Master or Slave | Dual Mode Slave |
|---------|------|-----------------|-----------------|
| DEFAULT | 0    | SDA/PA2 SCL/PA3 | SDA/PC2 SCL/PC3 |
| DEFAULT | 0    | SDA/PA2 SCL/PA3 | Not avail.      |
| ALT2    | 2    | SDA/PC2 SCL/PC3 | Not avail.      |
| ALT3    | 3    | SDA/PA0 SCL/PA1 | SDA/PC2 SCL/PC3 |

Note that this means that you want Wire.swap(0, 2, or 3, but not 1).

### PWM Pins
Even with 28 pins, there still isn't a whole lot of choice...
* TCA0 still obviously wants to be on PORTA, the only port with more than half of it's outputs, as the PORTD pins we gained can't do PWM.
* TCD0 can go either way as required, we leave it at default. PF0/1, PD4/5, and PF0/1 are not used for
* The TCBs don't get used for PWM - they share PA2 and PA3 with TCA0, and no different PORTMUX option can return at least the three pins you lose from switching to PORTC instead of PORTA, though they will be used if PORTMUX is set to point TCA0 to a port other than PORTA, and the timer isn't being used for millis, which TCB1 usually is.

#### TCA mux options
| TCA0    | WO0 | WO1 | WO2 | WO3 | WO4 | WO5 |
|---------|-----|-----|-----|-----|-----|-----|
| PORTA   | PA0 | PA1 | PA2 | PA3 | PA4 | PA5 |
| PORTC   |  -  | PC1 | PC2 | PC3 |  -  |  -  |
| PORTD   |  -  | PD1 | PD2 | PD3 | PD4 | PD5 |
| PORTF   | PF0 | PF1 |  -  |  -  |  -  |  -  |

#### TCB mux options
| TCBn | Default | Alt |
|------|---------|-----|
| TCB0 |    PA2  |  -  |
| TCB1 |    PA3  |  -  |
| TCB2 |    PC0  |  -  |
Not much of a choice. PC0 is the only one that's useful without changing portmux options.

#### TCD0 mux options
| TCD0    | WOA | WOB | WOC | WOD |
|---------|-----|-----|-----|-----|
| DEFAULT | PA4 | PA5 | PA6 | PA7 |
| ALT2    | PF0 | PF1 |  -  |  -  |
| ALT4    | PA4 | PA5 | PD4 | PD5 |
